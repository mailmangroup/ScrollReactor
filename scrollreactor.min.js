var SR={items:[],timeout:null,debounce:500,fn:{},addEffect:function(a,b){this.fn[a]=b},init:function(){var a=this;this.setup(),$(window).resize(function(){a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(function(){a.setup(),a.timeout=null},a.debounce)}),$(window).on("scroll",function(){a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(function(){a.check(),a.timeout=null},a.debounce)})},setup:function(){var a=this;$.each($("[sr-effect]"),function(b,c){var c=$(c),d={},e=c.attr("id")||c.attr("id","sr"+Math.floor(1e4*Math.random())).attr("id"),f=$.map(a.items,function(a){return a.id==e?a:null});d=f.length>0?f[0]:{id:e,start:c.offset().top,end:c.offset().top+c.height(),effect:c.attr("sr-effect"),enter:c.attr("sr-enter")||!1,exit:c.attr("sr-exit")||!1,state:c.attr("sr-state")||!0,busy:!1},"object"==typeof a.fn[d.effect]?("function"==typeof a.fn[d.effect].enter&&(d.enter=a.fn[d.effect].enter),"function"==typeof a.fn[d.effect].exit&&(d.exit=a.fn[d.effect].exit)):console.log("effect not found",d.effect),0==f.length?a.items.push(d):a.items=$.map(a.items,function(a){return a.id==d.id?d:a})}),this.check()},check:function(){for(var a={start:$(window).scrollTop(),end:$(window).height()+$(window).scrollTop()},b=0;b<this.items.length;b++){var c=this.items[b];c.start>a.start&&c.end<a.end?c.state||c.busy||("function"==typeof c.enter&&c.enter(),this.items[b].state=!0):(a.start>c.end||a.end<c.start)&&c.state&&!c.busy&&("function"==typeof c.exit&&c.exit(),this.items[b].state=!1)}}};